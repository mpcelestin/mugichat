{% extends "base.html" %}
{% block content %}
<div class="container">
    {% if current_stream %}
        <div class="alert alert-info">
            You're already live! <a href="{{ url_for('view_stream', stream_id=current_stream.id) }}">View your stream</a>
        </div>
    {% else %}
        <div class="row">
            <div class="col-md-6 mx-auto">
                <div class="card">
                    <div class="card-header">
                        <h4>Start a Live Stream</h4>
                    </div>
                    <div class="card-body">
                        <form method="POST" action="{{ url_for('live') }}">
                            {{ form.hidden_tag() }}
                            <div class="mb-3">
                                {{ form.title.label(class="form-label") }}
                                {{ form.title(class="form-control") }}
                            </div>
                            <div class="mb-3">
                                {{ form.description.label(class="form-label") }}
                                {{ form.description(class="form-control", rows=3) }}
                            </div>
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">Go Live Now</button>
                                <a href="{{ url_for('live') }}" class="btn btn-secondary" onclick="event.preventDefault(); document.getElementById('quick-live-form').submit();">
                                    Quick Start (Default Settings)
                                </a>
                            </div>
                        </form>
                        
                        <form id="quick-live-form" action="{{ url_for('live') }}" method="POST" style="display: none;">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}